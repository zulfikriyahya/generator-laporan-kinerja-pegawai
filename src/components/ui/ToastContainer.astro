<div
	x-data="{ toasts: [] }"
	x-init="
    $store.toasts.subscribe(val => toasts = val);
  "
	class="fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none"
>
	<template x-for="toast in toasts" :key="toast.id">
		<div
			class="pointer-events-auto px-4 py-3 rounded-lg shadow-lg border backdrop-blur-md flex items-center gap-3 animate-slide-in min-w-[300px]"
			:class="{
        'bg-emerald-500/10 border-emerald-500/20 text-emerald-400': toast.type === 'success',
        'bg-red-500/10 border-red-500/20 text-red-400': toast.type === 'error',
        'bg-blue-500/10 border-blue-500/20 text-blue-400': toast.type === 'info'
      }"
		>
			<span
				x-text="toast.type === 'success' ? '✓' : toast.type === 'error' ? '✕' : 'ℹ'"
				class="font-bold"></span>
			<span x-text="toast.message" class="text-sm font-medium"></span>
		</div>
	</template>
</div>

<script>
	import Alpine from "alpinejs";
	import { $toasts } from "../../stores/toastStore";

	document.addEventListener("alpine:init", () => {
		Alpine.store("toasts", {
			subscribe: (cb) => $toasts.subscribe(cb),
		});
	});
</script>

<style>
	.animate-slide-in {
		animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
	}
	@keyframes slideIn {
		from {
			transform: translateX(100%);
			opacity: 0;
		}
		to {
			transform: translateX(0);
			opacity: 1;
		}
	}
</style>
